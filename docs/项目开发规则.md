# 项目开发规则

## 文档化要求规则

### 规则1：需求文档维护

当完成重要功能开发或架构改进时，必须：

1. **创建或更新需求文档**

   - 在项目根目录的 `docs/` 文件夹中维护文档
   - 文档必须包含：需求描述、实现方案、技术决策、代码关键点
   - 每个需求都要有明确的问题陈述和解决方案

2. **需求实现总结**

   - 每个需求必须有"需求实现的部分"章节
   - 总结最终确认的实现方式
   - 记录关键的技术选择和原因

3. **方案对比记录**
   - 当存在多种实现方案时，必须记录：
     - 各方案的优缺点对比
     - 最终选择的方案及选择原因
     - 未采用方案的删除记录

### 规则2：项目清理要求

在确定最终技术方案后：

1. **删除废弃代码**

   - 删除所有未采用方案的代码文件
   - 移除相关的导入语句和引用
   - 确保代码库中只保留最终方案的代码

2. **代码库清洁性**
   - 确保没有无用的依赖导入
   - 删除注释掉的备选实现
   - 维护清晰的文件结构

### 规则3：技术决策文档化

每次重要的技术决策都需要记录：

1. **决策背景**：为什么需要做这个决策
2. **可选方案**：考虑了哪些不同的实现方式
3. **选择标准**：基于什么标准进行选择（性能、维护性、开发效率等）
4. **最终决策**：选择了什么方案，为什么
5. **实施细节**：具体如何实现的
6. **影响分析**：这个决策对项目的影响

### 规则4：代码重构规则

当进行重大重构时：

1. **重构前评估**

   - 明确重构的目标和预期收益
   - 评估重构的风险和成本
   - 制定重构计划

2. **重构过程管控**

   - 保持向后兼容性（除非明确需要破坏性改变）
   - 分步骤进行，避免一次性大幅修改
   - 及时更新相关文档

3. **重构后验证**
   - 确保所有功能正常工作
   - 更新相关文档和注释
   - 清理旧代码和文件

### 规则5：功能开发流程

每个新功能的开发必须遵循：

1. **需求分析阶段**

   - 明确功能需求和用户期望
   - 分析技术可行性和实现难度
   - 制定实现计划

2. **方案设计阶段**

   - 考虑多种实现方案
   - 进行方案对比和评估
   - 选择最优方案

3. **实现阶段**

   - 遵循项目代码规范
   - 保持良好的代码结构
   - 添加必要的错误处理

4. **测试和优化阶段**

   - 验证功能完整性
   - 进行性能优化
   - 用户体验优化

5. **文档化阶段**
   - 更新需求文档
   - 记录实现细节
   - 更新项目规则（如有需要）

## 附加任务处理规则

### 规则6：文档化附加任务

当用户提出附加任务（如文档整理、规则制定）时：

1. **立即响应**

   - 不延迟处理附加任务
   - 将附加任务与主要任务并行处理

2. **完整性要求**

   - 整理所有相关内容，不遗漏任何重要信息
   - 创建结构化的文档，便于后续查阅
   - 包含足够的细节，确保信息完整

3. **规则提取**
   - 从附加任务中提取可重复应用的规则
   - 将这些规则添加到项目规范中
   - 确保规则具有指导性和可操作性

### 规则7：项目规范更新

当项目规范需要更新时：

1. **增量更新**

   - 在现有规范基础上增加新规则
   - 不删除仍然有效的旧规则
   - 明确标注规则的适用范围

2. **规则分类**

   - 按功能和用途对规则进行分类
   - 使用清晰的标题和编号
   - 提供具体的操作指引

3. **版本控制**
   - 记录规则的创建和修改时间
   - 说明规则产生的背景和原因
   - 保持规则文档的时效性

## 质量保证规则

### 规则8：代码质量标准

所有代码必须满足：

1. **TypeScript规范**

   - 全面使用TypeScript类型定义
   - 避免any类型的使用
   - 保持接口定义的清晰性

2. **React最佳实践**

   - 使用函数组件和Hooks
   - 合理使用useMemo和useCallback优化性能
   - 保持组件的单一职责原则

3. **状态管理规范**
   - 使用合适的状态管理方案（Zustand、Context等）
   - 避免prop drilling问题
   - 保持状态更新的可预测性

### 规则9：用户体验标准

所有功能必须考虑：

1. **交互反馈**

   - 提供清晰的加载状态
   - 给用户明确的操作反馈
   - 处理错误状态和边界情况

2. **性能要求**

   - 响应时间在用户可接受范围内
   - 避免不必要的重渲染
   - 合理使用缓存和优化策略

3. **可访问性**
   - 保证键盘导航可用
   - 提供合适的语义化标签
   - 支持屏幕阅读器等辅助工具

---

_本规则文档将随着项目发展持续更新和完善_
